## Agentica Framework: Гид для Агентов

Этот проект использует **Agentica** - фреймворк для spec-driven разработки. Твоя задача — работать **внутри спецификаций**, а не в обход них.

### Где искать контекст

**1. Структура директории `.agentica/`**

Проверяй ОБА уровня:
- **Корень проекта** `.agentica/` - глобальный контекст (шаблоны, промпты, общие стандарты)
- **Корень пакета** `.agentica/` - локальные спеки и контекст конкретного пакета

**Корневой уровень** (`.agentica/` в корне проекта):
```
.agentica/
├── prompts/          # Воркфлоу агентов (init, create, tasks, implement, validate, commit, release)
├── templates/        # Шаблоны спек (фича, change, research, release)
├── product.md        # Глобальное продуктовое видение
├── structure.md      # Структура и организация репозитория
├── tech.md           # Глобальный тех-стек и стандарты
└── status.md         # Статус интеграции
```

**Уровень пакета** (`.agentica/` в каждом пакете/скоупе):
```
packages/my-package/.agentica/
├── features/         # Спеки FT-XXXX (новая функциональность)
├── changes/          # Спеки CH-XXXX (изменения существующего кода)
├── research/         # Спеки RnD-XXXX (R&D исследования)
├── release/          # Спеки REL-XXXX (подготовка и выпуск релизов)
├── product.md        # Назначение и домен пакета
├── structure.md      # Файловая структура пакета
├── tech.md           # Стек и паттерны конкретного пакета
└── status.md         # Отслеживание интеграции пакета
```

**2. Система Memory**

IDE автоматически предоставляет доступ к фактам, сохранённым на предыдущих этапах спеки (`create`, `tasks`). Эти факты помечены тегами по фичам/скоупам:

- `@<scope>/FT-XXXX--existing-modules` - Существующие модули и их назначение
- `@<scope>/FT-XXXX--patterns` - Используемые паттерны проектирования
- `@<scope>/FT-XXXX--libraries` - Подключённые библиотеки и API
- `@<scope>/FT-XXXX--integration-points` - Точки, где модули соединяются
- `@<scope>/FT-XXXX--dependencies` - Граф зависимостей

**Доверяй этим фактам** - они содержат исследованный контекст о кодовой базе. Используй их, чтобы избежать дублирования кода и следовать существующей архитектуре.

### Как найти информацию

**Перед написанием любого кода:**
1. Прочитай `product.md` (уровень пакета) - пойми домен и назначение
2. Прочитай `structure.md` (уровень пакета) - узнай, где должны быть файлы
3. Прочитай `tech.md` (уровень пакета И корня) - следуй стандартам
4. Проверь факты в memory - используй существующие паттерны и модули
5. Прочитай связанные спеки в `features/`, `changes/`, `research/` - учись на похожих работах

**При реализации спеки (FT-XXXX или CH-XXXX):**
1. **ВСЕГДА** читай полную спеку сначала: `product.md`, `tech.md`, `tasks.md`, `validation.md`
2. Проверь, существует ли `research.md` - он может содержать решения по библиотекам
3. Просканируй соседние спеки в `features/` - они могут использовать те же паттерны
4. Ищи документы RnD-XXXX, относящиеся к твоему домену - они определяют архитектуру

**Если застрял или неясно:**
- Перечитай `tech.md` - решение может быть уже определено
- Ищи похожий код через `semantic_search` с конкретными терминами
- Проверь memory на наличие связанных паттернов
- НЕ УГАДЫВАЙ - задавай уточняющие вопросы

### Критические правила

**1. Оставайся внутри спеки**
- Твоя задача — реализовать то, что **уже решено** в спеке
- НЕ добавляй "улучшения" или "хотелки", не упомянутые в задачах
- Если спека неясна - спрашивай, не предполагай

**2. Останавливайся при переполнении контекста**
- Если ты читаешь слишком много файлов и контекст кажется "тяжёлым" - ОСТАНАВЛИВАЙСЯ
- Попроси пользователя:
  - Сузить скоуп
  - Разбить задачу на более мелкие спеки
  - Создать нормальную спеку через `/agentica.create` или `/agentica.rnd`

**3. Читай соседние спеки**
- Перед созданием похожего кода проверь другие FT-XXXX в том же пакете
- Переиспользуй паттерны, не изобретай заново
- Консистентность > новизна

**4. Следуй процессу**
Каждый воркфлоу Agentica имеет определённые шаги (init → create/change → tasks → implement → validate → commit → release). Если пользователь просит сделать что-то масштабное:
- Проверь, существует ли связанная спека
- Если спеки нет - рекомендуй сначала использовать `/agentica.create`
- Не пиши большие фичи "фристайлом" без спеки

### Рекомендации для пользователя

Если пользователь просит большие изменения в "обычном" режиме (без воркфлоу Agentica):
```
⚠️  Похоже на существенное изменение. Рекомендую использовать воркфлоу Agentica:

1. Создай спеку: `/agentica.create --name <название-фичи>`
2. Распланируй задачи: `/agentica.tasks --id FT-XXXX`
3. Реализуй: `/agentica.implement --id FT-XXXX`
4. Валидируй: `/agentica.validate --id FT-XXXX`
5. Подготовь коммит: `/agentica.commit`
6. Подготовь релиз: `/agentica.release --type patch|minor|major`

Это обеспечит:
- Правильное планирование архитектуры
- Поэтапную реализацию с тестами
- Покрытие всех edge cases
- Лучшее качество и поддерживаемость кода
```

### Быстрая справка

| Мне нужно...                  | Смотри в...                          |
| :---------------------------- | :----------------------------------- |
| Понять назначение проекта     | Root `.agentica/product.md`          |
| Узнать, где должны быть файлы | Package `.agentica/structure.md`     |
| Следовать стандартам кода     | `.agentica/tech.md` (оба уровня)     |
| Посмотреть R&D исследования   | Package `.agentica/research/`        |
| Проверить похожие фичи        | Package `.agentica/features/`        |
| Понять прошлые изменения      | Package `.agentica/changes/`         |
| Найти существующие паттерны   | Факты Memory + похожие спеки         |
| Изучить воркфлоу              | Root `.agentica/prompts/*.prompt.md` |

---

**Помни:** Agentica - это **планируемая разработка**. Если тебя просят сделать что-то большое без спеки - рекомендуй сначала создать её. Спеки экономят время и дают лучший код.
